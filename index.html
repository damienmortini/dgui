<!DOCTYPE html>
<html>

<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-xxxxxxxx-x"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-xxxxxxxx-x');
  </script>

  <meta charset="UTF-8">
  <title>dnit</title>
  <meta name="description" content="dnit">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="src/index.css">
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
      overflow: hidden;
    }

    dnit-main {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <script src="node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

  <script type="text/javascript">
    {
      const script = document.createElement("script");
      document.currentScript.parentNode.insertBefore(script, document.currentScript.nextSibling);
      script.onload = () => {
        DGUI.addInput({value: .5}, "value", {
          label: "Number"
        }).addEventListener("input", (e) => {
          console.log("Number", e.target.value);
        });
        DGUI.addInput({value: 1}, "value", {
          label: "Range",
          max: 2,
        }).addEventListener("input", (e) => {
          console.log("Range", e.target.value);
        });
        DGUI.addInput({value: "Lorem ipsum dolor sit amet, consectetur adipiscing elit."}, "value", {
          label: "Text"
        }).addEventListener("input", (e) => {
          console.log("Text", e.target.value);
        });
        DGUI.addInput({value: true}, "value", {
          label: "Checkbox"
        }).addEventListener("input", (e) => {
          console.log("Checkbox", e.target.value);
        });
        DGUI.addInput({value: () => {}}, "value", {
          label: "Button"
        }).addEventListener("input", (e) => {
          console.log("Button", e.target.value);
        });
        DGUI.addInput({value: 2}, "value", {
          label: "Select",
          options: [
            "One",
            2,
            true,
            [4, 8, 16, 32]
          ]
        }).addEventListener("input", (e) => {
          console.log("Select", e.target.value);
        });
        DGUI.addInput({value: {r: 1, g: .5, b: 0}}, "value", {
          label: "Color RGB"
        }).addEventListener("input", (e) => {
          console.log("Color RGB", e.target.value);
        });
        DGUI.addInput({value: [0, 1, .5]}, "value", {
          label: "Color Array",
          type: "color"
        }).addEventListener("input", (e) => {
          console.log("Color Array", e.target.value);
        });
        DGUI.addInput({value: "rgba(128, 0, 255, 1)"}, "value", {
          label: "Color Style"
        }).addEventListener("input", (e) => {
          console.log("Color Style", e.target.value);
        });
        console.log(JSON.stringify(DGUI));
        // Object.assign(DGUI, JSON.parse(`{"nodes":[{"name":"main","label":"Main","inputs":[{"name":"number","label":"Number","type":"number","value":0.5},{"name":"range","label":"Range","type":"range","value":1},{"name":"text","label":"Text","type":"text","value":"Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{"name":"checkbox","label":"Checkbox","type":"checkbox","value":false},{"name":"button","label":"Button","type":"button"},{"name":"select","label":"Select","type":"select","value":2},{"name":"color rgb","label":"Color RGB","type":"color","value":{"r":1,"g":0.4980392156862745,"b":0}},{"name":"color array","label":"Color Array","type":"color","value":[1,1,0.4980392156862745]},{"name":"color style","label":"Color Style","type":"color","value":"rgba(128, 0, 255, 1)"}]},{"name":"first","label":"First","inputs":[{"name":"test","label":"test","type":"number","value":3},{"name":"test2","label":"test2","type":"select","value":4}]},{"name":"second","label":"Second","inputs":[{"name":"test","label":"test","type":"range","value":8},{"name":"test2","label":"test2","type":"select","value":4}]}]}`));
      }
      if (/\bdev\b/.test(window.location.search)) {
        script.type = "module";
        script.src = "./src/index.js";
      } else {
        script.src = "./build/index.js";
      }
    }
  </script>
</body>

</html>