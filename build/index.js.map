{"version":3,"file":"index.js","sources":["../src/node/NodeElement.js","../src/gui.config.js","../src/misc/DraggableElement.js","../src/misc/ZoomableElement.js","../src/node/NodeEditorElement.js","../node_modules/dlib/utils/Signal.js","../node_modules/dlib/utils/Ticker.js","../node_modules/gl-matrix/src/gl-matrix/common.js","../node_modules/gl-matrix/src/gl-matrix/vec2.js","../node_modules/dlib/math/Vector2.js","../node_modules/dlib/input/Pointer.js","../src/node/NodeLinkElement.js","../src/node/NodeLinkSystemElement.js","../src/node/NodeConnectorElement.js","../src/input/SelectInputNodeElement.js","../src/input/ButtonInputNodeElement.js"],"sourcesContent":["export default class NodeElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"name\", \"enabled\", \"draggable\", \"x\", \"y\", \"width\", \"height\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          display: block;\r\n          overflow: auto;\r\n          resize: both;\r\n        }\r\n        \r\n        :host([draggable]) {\r\n          border: 1px dotted;\r\n          position: absolute;\r\n          background: rgba(255, 255, 255, .9);\r\n        }\r\n\r\n        :host([draggable]:hover) {\r\n          border: 1px dashed;\r\n        }\r\n\r\n        :host([draggable]:focus-within) {\r\n          border: 1px solid;\r\n          z-index: 1;\r\n        }\r\n\r\n        details, slot {\r\n          padding: 5px;\r\n        }\r\n\r\n        details summary {\r\n          position: relative;\r\n          padding: 5px;\r\n          outline: none;\r\n        }\r\n\r\n        dnod-draggable {\r\n          display: contents;\r\n        }\r\n      </style>\r\n      <dnod-draggable draggable=\"false\" data-target=\"this.getRootNode().host\">\r\n        <slot name=\"content\">\r\n          <details>\r\n            <summary></summary>\r\n            <slot></slot>\r\n          </details>\r\n        </slot>\r\n      </dnod-draggable>\r\n    `;\r\n\r\n    this._details = this.shadowRoot.querySelector(\"details\");\r\n\r\n    this.open = true;\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.draggable = true;\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (oldValue === newValue) {\r\n      return;\r\n    }\r\n    switch (name) {\r\n      case \"disabled\":\r\n        this.enabled = this[name] = newValue !== null;\r\n        break;\r\n      case \"draggable\":\r\n        this.shadowRoot.querySelector(\"dnod-draggable\").setAttribute(name, newValue);\r\n        break;\r\n      default:\r\n        this[name] = newValue;\r\n        break;\r\n    }\r\n  }\r\n\r\n  set name(value) {\r\n    this._name = value;\r\n    this._details.querySelector(\"summary\").textContent = this._name;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  set open(value) {\r\n    this._details.open = value;\r\n  }\r\n\r\n  get open() {\r\n    return this._details.open;\r\n  }\r\n\r\n  get x() {\r\n    return this._x;\r\n  }\r\n\r\n  set x(value) {\r\n    this._x = parseFloat(value);\r\n    this._updateBoundingRect();\r\n  }\r\n\r\n  get y() {\r\n    return this._y;\r\n  }\r\n\r\n  set y(value) {\r\n    this._y = parseFloat(value);\r\n    this._updateBoundingRect();\r\n  }\r\n\r\n  get width() {\r\n    return this._width;\r\n  }\r\n\r\n  set width(value) {\r\n    this._width = parseFloat(value);\r\n    this._updateBoundingRect();\r\n  }\r\n\r\n  get height() {\r\n    return this._height;\r\n  }\r\n\r\n  set height(value) {\r\n    this._height = parseFloat(value);\r\n    this._updateBoundingRect();\r\n  }\r\n\r\n  _updateBoundingRect() {\r\n    this.style.left = `${this.x}px`;\r\n    this.style.top = `${this.y}px`;\r\n    this.style.width = `${this.width}px`;\r\n    this.style.height = `${this.height}px`;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: this.name,\r\n    };\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node\", NodeElement);\r\n","export default {\r\n    inputTypeMap: {\r\n        \"button\": \"dnod-node-input-button\",\r\n        \"checkbox\": \"dnod-node-input-checkbox\",\r\n        \"color\": \"dnod-node-input-color\",\r\n        \"number\": \"dnod-node-input-number\",\r\n        \"range\": \"dnod-node-input-range\",\r\n        \"select\": \"dnod-node-input-select\",\r\n        \"text\": \"dnod-node-input-text\",\r\n    },\r\n    typeResolvers: {\r\n        \"text\": (attributes) => typeof attributes.value === \"string\",\r\n        \"range\": (attributes) => typeof attributes.value === \"number\",\r\n        \"checkbox\": (attributes) => typeof attributes.value === \"boolean\",\r\n        \"button\": (attributes) => typeof attributes.value === \"function\",\r\n        \"color\": (attributes) => {\r\n            return typeof attributes.value === \"string\" && ((attributes.value.length === 7 && attributes.value.startsWith(\"#\")) || attributes.value.startsWith(\"rgb\") || attributes.value.startsWith(\"hsl\")) || (typeof attributes.value === \"object\" && attributes.value.r !== undefined && attributes.value.g !== undefined && attributes.value.b !== undefined);\r\n        },\r\n        \"select\": (attributes) => !!attributes.options,\r\n    },\r\n};\r\n","let draggedElement;\r\n\r\nexport default class DraggableElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"draggable\", \"data-target\", \"data-handle\", \"data-deep-drag-factor\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          display: inline-block;\r\n          position: relative;\r\n          width: 20px;\r\n          height: 20px;\r\n        }\r\n        \r\n        :host(:hover) {\r\n          outline: 1px dotted;\r\n        }\r\n\r\n        :host(:active) {\r\n          cursor: grabbing;\r\n          cursor: -webkit-grabbing;\r\n        }\r\n        \r\n        slot {\r\n          display: block;\r\n          cursor: grab;\r\n          cursor: -webkit-grab;\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n\r\n        slot svg {\r\n          width: 100%;\r\n          height: 100%;\r\n          pointer-events: none;\r\n        }\r\n      </style>\r\n      <slot><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path d='M7 4a1 1 0 1 1-1-1 1 1 0 0 1 1 1zm3 1a1 1 0 1 0-1-1 1 1 0 0 0 1 1zM6 7a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm4 0a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-4 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm4 0a1 1 0 1 0 1 1 1 1 0 0 0-1-1z'/></svg></slot>\r\n    `;\r\n\r\n    this.dragFactor = 1;\r\n\r\n    this.deepDragFactor = false;\r\n\r\n    this._currentDragFactor = 0;\r\n\r\n    this._draggable = true;\r\n\r\n    this._handle = this;\r\n    this._target = this;\r\n\r\n    this._offsetX = 0;\r\n    this._offsetY = 0;\r\n\r\n    this._dragStartX = 0;\r\n    this._dragStartY = 0;\r\n\r\n    this._preventDefaultBinded = this._preventDefault.bind(this);\r\n    this._onPointerDownBinded = this._onPointerDown.bind(this);\r\n    this._onPointerMoveBinded = this._onPointerMove.bind(this);\r\n    this._onPointerUpBinded = this._onPointerUp.bind(this);\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.draggable = this.draggable;\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (oldValue === newValue) {\r\n      return;\r\n    }\r\n    switch (name) {\r\n      case \"draggable\":\r\n        this.draggable = newValue === \"true\";\r\n        break;\r\n      case \"data-target\":\r\n        this.target = eval(newValue);\r\n        break;\r\n      case \"data-handle\":\r\n        this.handle = eval(newValue);\r\n        break;\r\n      case \"data-deep-drag-factor\":\r\n        this.deepDragFactor = newValue === \"true\";\r\n        break;\r\n    }\r\n  }\r\n\r\n  get target() {\r\n    return this._target;\r\n  }\r\n\r\n  set target(value) {\r\n    this._target = value;\r\n    this.draggable = this.draggable;\r\n  }\r\n\r\n  get handle() {\r\n    return this._handle;\r\n  }\r\n\r\n  set handle(value) {\r\n    this.handle.removeEventListener(\"pointerdown\", this._onPointerDownBinded);\r\n    this._handle = value;\r\n    this.draggable = this.draggable;\r\n  }\r\n\r\n  get draggable() {\r\n    return this._draggable;\r\n  }\r\n\r\n  set draggable(value) {\r\n    this._draggable = value;\r\n\r\n    super.draggable = value;\r\n\r\n    this.handle.removeEventListener(\"pointerdown\", this._onPointerDownBinded);\r\n\r\n    if (!this.target) {\r\n      return;\r\n    }\r\n\r\n    this.target.removeEventListener(\"dragstart\", this._preventDefaultBinded);\r\n\r\n    if (this.draggable) {\r\n      this.handle.addEventListener(\"pointerdown\", this._onPointerDownBinded);\r\n      this.target.addEventListener(\"dragstart\", this._preventDefaultBinded);\r\n    }\r\n  }\r\n\r\n  _preventDefault(event) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  _onPointerDown(event) {\r\n    if (draggedElement || event.button !== 0 || event.path[0].tagName === \"INPUT\" || event.path[0].getAttribute(\"draggable\") === \"false\") {\r\n      return;\r\n    }\r\n\r\n    this._currentDragFactor = this.dragFactor;\r\n\r\n    for (const element of event.path) {\r\n      if (element instanceof DraggableElement && element.deepDragFactor) {\r\n        this._currentDragFactor *= element.dragFactor;\r\n      }\r\n    }\r\n\r\n    draggedElement = this;\r\n\r\n    this._dragStartX = event.clientX * this._currentDragFactor;\r\n    this._dragStartY = event.clientY * this._currentDragFactor;\r\n    this._offsetX = this._target.offsetLeft;\r\n    this._offsetY = this._target.offsetTop;\r\n\r\n    this._target.style.willChange = \"transform\";\r\n    window.addEventListener(\"pointermove\", this._onPointerMoveBinded, { passive: false });\r\n    window.addEventListener(\"pointerup\", this._onPointerUpBinded);\r\n    window.addEventListener(\"touchmove\", this._preventDefaultBinded, { passive: false });\r\n  }\r\n\r\n  _onPointerMove(event) {\r\n    this.target.style.transform = `translate(${event.clientX * this._currentDragFactor - this._dragStartX}px, ${event.clientY * this._currentDragFactor - this._dragStartY}px)`;\r\n  }\r\n\r\n  _onPointerUp(event) {\r\n    this._target.style.willChange = \"\";\r\n    window.removeEventListener(\"pointermove\", this._onPointerMoveBinded);\r\n    window.removeEventListener(\"pointerup\", this._onPointerUpBinded);\r\n    window.removeEventListener(\"touchmove\", this._preventDefaultBinded);\r\n    this._target.style.left = `${this._offsetX + event.clientX * this._currentDragFactor - this._dragStartX}px`;\r\n    this._target.style.top = `${this._offsetY + event.clientY * this._currentDragFactor - this._dragStartY}px`;\r\n    this.target.style.transform = \"\";\r\n\r\n    draggedElement = null;\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-draggable\", DraggableElement);\r\n","let draggedElement;\r\n\r\nexport default class ZoomableElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"data-listener\", \"min\", \"max\", \"zoom\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          display: inline-block;\r\n          position: relative;\r\n          width: 20px;\r\n          height: 20px;\r\n        }\r\n        \r\n        slot {\r\n          display: block;\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n\r\n        slot svg {\r\n          width: 100%;\r\n          height: 100%;\r\n          pointer-events: none;\r\n        }\r\n      </style>\r\n      <slot></slot>\r\n    `;\r\n\r\n    this._min = 0;\r\n    this._max = Infinity;\r\n    this._zoom = 1;\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (oldValue === newValue) {\r\n      return;\r\n    }\r\n    switch (name) {\r\n      case \"data-listener\":\r\n        this.listener = new Function(`return ${newValue}`).apply(this);\r\n        break;\r\n      default:\r\n        this[name] = parseFloat(newValue);\r\n        break;\r\n    }\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.listener = this.listener || this;\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener(\"wheel\", this._onWheelBinded);\r\n  }\r\n\r\n  _onWheel(event) {\r\n    this.style.transformOrigin = \"50% 50%\";\r\n    this.zoom += event.wheelDeltaY * .0004;\r\n  }\r\n\r\n  get listener() {\r\n    return this._listener;\r\n  }\r\n\r\n  set listener(value) {\r\n    if (this._listener) {\r\n      this._listener.removeEventListener(\"wheel\", this._onWheelBinded);\r\n    }\r\n    this._listener = value;\r\n    this._listener.addEventListener(\"wheel\", this._onWheelBinded = this._onWheelBinded || this._onWheel.bind(this));\r\n  }\r\n\r\n  get zoom() {\r\n    return this._zoom;\r\n  }\r\n\r\n  set zoom(value) {\r\n\r\n    if (value === this._zoom) {\r\n      return;\r\n    }\r\n\r\n    this._zoom = value;\r\n\r\n    this._zoom = Math.min(this.max, Math.max(this.min, this._zoom));\r\n\r\n    this.style.transform = `scale(${this._zoom})`;\r\n\r\n    this.dispatchEvent(new Event(\"zoom\"));\r\n  }\r\n\r\n  get min() {\r\n    return this._min;\r\n  }\r\n\r\n  set min(value) {\r\n    this._min = value;\r\n    this.zoom = this.zoom;\r\n  }\r\n\r\n  get max() {\r\n    return this._max;\r\n  }\r\n\r\n  set max(value) {\r\n    this._max = value;\r\n    this.zoom = this.zoom;\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-zoomable\", ZoomableElement);\r\n","import GUIConfig from \"../gui.config.js\";\r\n\r\nimport \"../misc/DraggableElement.js\";\r\nimport \"../misc/ZoomableElement.js\";\r\n\r\nexport default class NodeEditor extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          display: block;\r\n        }\r\n\r\n        dnod-zoomable, dnod-draggable {\r\n          position: absolute;\r\n          left: 0;\r\n          top: 0;\r\n          will-change: transform;\r\n        }\r\n\r\n        dnod-draggable:hover {\r\n          outline: none;\r\n        }\r\n        \r\n        dnod-zoomable {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      </style>\r\n      <dnod-node-link-system data-listener=\"this.getRootNode().host\"></dnod-node-link-system>\r\n      <dnod-zoomable data-listener=\"this.getRootNode().host\" min=\".1\" max=\"3\">\r\n        <dnod-draggable draggable=\"true\" data-deep-drag-factor=\"true\" data-handle=\"this.getRootNode().host\">\r\n          <slot></slot>\r\n        </dnod-draggable>\r\n      </dnod-zoomable>\r\n    `;\r\n\r\n    const zoomable = this.shadowRoot.querySelector(\"dnod-zoomable\");\r\n    const draggable = this.shadowRoot.querySelector(\"dnod-draggable\");\r\n\r\n    zoomable.addEventListener(\"zoom\", () => {\r\n      draggable.dragFactor = 1 / zoomable.zoom;\r\n    });\r\n\r\n    this._nodesDataMap = new Map();\r\n  }\r\n\r\n  get nodesData() {\r\n    return JSON.parse(JSON.stringify([...this._nodesDataMap.values()]));\r\n  }\r\n\r\n  set nodesData(value) {\r\n    this.innerHTML = \"\";\r\n    for (let node of value) {\r\n      if (!node.type) {\r\n        for (const typeResolverKey in GUIConfig.typeResolvers) {\r\n          node.type = GUIConfig.typeResolvers[typeResolverKey](node) ? typeResolverKey : node.type;\r\n        }\r\n      }\r\n\r\n      if (!node.type && node.nodes) {\r\n        node.type = \"dnod-node-group\";\r\n      }\r\n\r\n      let nodeElement = this._nodesDataMap.get(node.name) || document.createElement(GUIConfig.inputTypeMap[node.type] || node.type);\r\n      this._nodesDataMap.set(node.name, nodeElement);\r\n      Object.assign(nodeElement, node);\r\n      this.appendChild(nodeElement);\r\n    }\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node-editor\", NodeEditor);\r\n","export default class Signal extends Set {\n  constructor() {\n    super();\n\n    this._onceCallbacksMap = new Map();\n  }\n\n  add(value, {once = false} = {}) {\n    if(once) {\n      const onceCallbackWrapper = () => {\n        value(...arguments);\n        this.delete(value);\n      };\n      this._onceCallbacksMap.set(value, onceCallbackWrapper);\n      super.add(onceCallbackWrapper);\n    } else {\n      super.add(value);\n    }\n  }\n\n  delete(value) {\n    super.delete(this._onceCallbacksMap.get(value) || value);\n    this._onceCallbacksMap.delete(value);\n  }\n\n  dispatch(value) {\n    for (let callback of this) {\n      callback(value);\n    }\n  }\n}\n","import Signal from \"./Signal.js\";\n\nclass Ticker extends Signal {\n  constructor() {\n    super();\n    \n    this._updateBinded = this._update.bind(this);\n\n    this.time = window.performance.now() * .001;\n    this._previousTime = this.time;\n    this.deltaTime = 0;\n    this.timeScale = 1;\n\n    this._update();\n  }\n\n  _update() {\n    requestAnimationFrame(this._updateBinded);\n\n    this.time = window.performance.now() * 0.001;\n    this.deltaTime = this.time - this._previousTime;\n    this.timeScale = this.deltaTime / .0166666667;\n    this._previousTime = this.time;\n\n    this.dispatch();\n  }\n}\n\nexport default new Ticker();\n","/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\nexport const RANDOM = Math.random;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\n\nconst degree = Math.PI / 180;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n","import * as glMatrix from \"./common.js\";\n\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = 0;\n  out[1] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nexport function fromValues(x, y) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to ceil\n * @returns {vec2} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to floor\n * @returns {vec2} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to round\n * @returns {vec2} out\n */\nexport function round (out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return Math.sqrt(x*x + y*y);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return x*x + y*y;\n}\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0],\n    y = a[1];\n  return Math.sqrt(x*x + y*y);\n}\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength (a) {\n  var x = a[0],\n    y = a[1];\n  return x*x + y*y;\n}\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nexport function normalize(out, a) {\n  var x = a[0],\n    y = a[1];\n  var len = x*x + y*y;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n    ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {vec2} a The vec2 point to rotate\n * @param {vec2} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec2} out\n */\nexport function rotate(out, a, b, c) {\n  //Translate point to the origin\n  let p0 = a[0] - b[0],\n  p1 = a[1] - b[1],\n  sinC = Math.sin(c),\n  cosC = Math.cos(c);\n  \n  //perform rotation and translate to correct position\n  out[0] = p0*cosC - p1*sinC + b[0];\n  out[1] = p0*sinC + p1*cosC + b[1];\n\n  return out;\n}\n\n/**\n * Get the angle between two 2D vectors\n * @param {vec2} a The first operand\n * @param {vec2} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  let x1 = a[0],\n    y1 = a[1],\n    x2 = b[0],\n    y2 = b[1];\n  \n  let len1 = x1*x1 + y1*y1;\n  if (len1 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len1 = 1 / Math.sqrt(len1);\n  }\n  \n  let len2 = x2*x2 + y2*y2;\n  if (len2 > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len2 = 1 / Math.sqrt(len2);\n  }\n  \n  let cosine = (x1 * x2 + y1 * y2) * len1 * len2;\n  \n  \n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1];\n  let b0 = b[0], b1 = b[1];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n}\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 2;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1];\n    }\n\n    return a;\n  };\n})();\n","import * as vec2 from \"../../gl-matrix/src/gl-matrix/vec2.js\";\r\n\r\nexport default class Vector2 extends Float32Array {\r\n  static distance(vector2a, vector2b) {\r\n    return vec2.distance(vector2a, vector2b);\r\n  }\r\n\r\n  constructor(array = [0, 0]) {\r\n    super(array);\r\n    return this;\r\n  }\r\n\r\n  get x() {\r\n    return this[0];\r\n  }\r\n\r\n  set x(value) {\r\n    this[0] = value;\r\n  }\r\n\r\n  get y() {\r\n    return this[1];\r\n  }\r\n\r\n  set y(value) {\r\n    this[1] = value;\r\n  }\r\n\r\n  set(x, y) {\r\n    vec2.set(this, x, y);\r\n    return this;\r\n  }\r\n\r\n  copy(vector2) {\r\n    vec2.copy(this, vector2);\r\n    return this;\r\n  }\r\n\r\n  add(vector2) {\r\n    vec2.add(this, this, vector2);\r\n    return this;\r\n  }\r\n\r\n  get size() {\r\n    return vec2.length(this);\r\n  }\r\n\r\n  get squaredSize() {\r\n    return vec2.squaredLength(this);\r\n  }\r\n\r\n  subtract(vector2) {\r\n    vec2.subtract(this, this, vector2);\r\n    return this;\r\n  }\r\n\r\n  negate(vector2 = this) {\r\n    vec2.negate(this, vector2);\r\n    return this;\r\n  }\r\n\r\n  cross(vector2a, vector2b) {\r\n    vec2.cross(this, vector2a, vector2b);\r\n    return this;\r\n  }\r\n\r\n  scale(value) {\r\n    vec2.scale(this, this, value);\r\n    return this;\r\n  }\r\n\r\n  normalize() {\r\n    vec2.normalize(this, this);\r\n  }\r\n\r\n  dot(vector2) {\r\n    return vec2.dot(this, vector2);\r\n  }\r\n\r\n  distance(vector2) {\r\n    return Vector2.distance(this, vector2);\r\n  }\r\n\r\n  equals(vector2) {\r\n    return vec2.exactEquals(this, vector2);\r\n  }\r\n\r\n  applyMatrix3(matrix3) {\r\n    vec2.transformMat3(this, this, matrix3);\r\n    return this;\r\n  }\r\n\r\n  applyMatrix4(matrix4) {\r\n    vec2.transformMat4(this, this, matrix4);\r\n    return this;\r\n  }\r\n\r\n  lerp(vector2, value) {\r\n    vec2.lerp(this, this, vector2, value);\r\n  }\r\n\r\n  clone() {\r\n    return new Vector2(this);\r\n  }\r\n}\r\n","import Vector2 from \"../math/Vector2.js\";\nimport Signal from \"../utils/Signal.js\";\nimport Ticker from \"../utils/Ticker.js\";\n\nlet pointers = new Map();\n\nexport default class Pointer extends Vector2 {\n  static get TOUCH_TYPE() {\n    return \"touchtype\";\n  }\n\n  static get MOUSE_TYPE() {\n    return \"mousetype\";\n  }\n\n  static get(domElement = document.body) {\n    let pointer = pointers.get(domElement);\n    if (!pointer) {\n      pointer = new Pointer(domElement);\n    }\n    return pointer;\n  }\n\n  get downed() {\n    return this._downed;\n  }\n\n  constructor(domElement = document.body) {\n    super();\n\n    this.domElement = domElement;\n\n    this.type = Pointer.TOUCH_TYPE;\n\n    this.velocity = new Vector2();\n    this.dragOffset = new Vector2();\n\n    this.centered = new Vector2();\n    this.centeredFlippedY = new Vector2();\n    this.normalized = new Vector2();\n    this.normalizedFlippedY = new Vector2();\n    this.normalizedCentered = new Vector2();\n    this.normalizedCenteredFlippedY = new Vector2();\n\n    this._downed = false;\n\n    pointers.set(this.domElement, this);\n\n    this.onDown = new Signal();\n    this.onMove = new Signal();\n    this.onUp = new Signal();\n    this.onClick = new Signal();\n    this.onTypeChange = new Signal();\n\n    this._preventMouseTypeChange = false;\n\n    this._onPointerMoveBinded = this._onPointerMove.bind(this);\n    this._onPointerDownBinded = this._onPointerDown.bind(this);\n    this._onPointerUpBinded = this._onPointerUp.bind(this);\n\n    this._updateBinded = this._update.bind(this);\n    this._resizeBinded = this.resize.bind(this);\n\n    this.resize();\n\n    this._position = new Vector2();\n\n    this.enable();\n  }\n\n  resize() {\n    this._domElementBoundingRect = this.domElement.getBoundingClientRect();\n  }\n\n  _onPointerDown(e) {\n    if(e.type === \"touchstart\") {\n      this._preventMouseTypeChange = true;\n      this._changeType(Pointer.TOUCH_TYPE);\n    }\n    this._downed = true;\n    this.dragOffset.set(0, 0);\n    this.copy(this._position);\n    this._onPointerEvent(e);\n    this._updatePositions();\n    this.onDown.dispatch(e);\n  }\n\n  _onPointerMove(e) {\n    if(e.type === \"mousemove\") {\n      if(this._preventMouseTypeChange) {\n        return;\n      } else {\n        this._changeType(Pointer.MOUSE_TYPE);\n      }\n    }\n    this._onPointerEvent(e);\n    this.onMove.dispatch(e);\n  }\n\n  _onPointerUp(e) {\n    if(!this._downed) {\n      return;\n    }\n    this._downed = false;\n    this._onPointerEvent(e);\n    this._updatePositions();\n    this.onUp.dispatch(e);\n    if(this.dragOffset.length < 4) {\n      this.onClick.dispatch(e);\n    }\n    clearTimeout(this._timeout);\n    this._timeout = setTimeout(() => {\n      this._preventMouseTypeChange = false;\n    }, 2000);\n  }\n\n  _onPointerEvent(e) {\n    if (!!window.TouchEvent && e instanceof window.TouchEvent) {\n      if(e.type === \"touchend\") {\n        e = e.changedTouches[0];\n      } else {\n        e = e.touches[0];\n      }\n    }\n    this._position.x = e.clientX - this._domElementBoundingRect.left;\n    this._position.y = e.clientY - this._domElementBoundingRect.top;\n  }\n\n  _changeType(type) {\n    if(this.type === type) {\n      return;\n    }\n    this.type = type;\n    this.disable();\n    this.enable();\n    this.onTypeChange.dispatch(this.type);\n  }\n\n  _update() {\n    if(this.x || this.y) {\n      this.velocity.x = this._position.x - this.x;\n      this.velocity.y = this._position.y - this.y;\n      if(this.downed) {\n        this.dragOffset.add(this.velocity);\n      }\n    }\n\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    this.x = this._position.x;\n    this.y = this._position.y;\n\n    if(!this.x && !this.y) {\n      return;\n    }\n\n    this.centered.x = this.centeredFlippedY.x = this.x - this._domElementBoundingRect.width * .5;\n    this.centered.y = this.centeredFlippedY.y = this.y - this._domElementBoundingRect.height * .5;\n    this.centeredFlippedY.y *= -1;\n\n    this.normalized.x = this.normalizedFlippedY.x = this.x / this._domElementBoundingRect.width;\n    this.normalized.y = this.normalizedFlippedY.y = this.y / this._domElementBoundingRect.height;\n    this.normalizedFlippedY.y = 1 - this.normalizedFlippedY.y;\n\n    this.normalizedCentered.x = this.normalizedCenteredFlippedY.x = this.normalized.x * 2 - 1;\n    this.normalizedCentered.y = this.normalizedCenteredFlippedY.y = this.normalized.y * 2 - 1;\n    this.normalizedCenteredFlippedY.y *= -1;\n  }\n\n  enable() {\n    this.disable();\n    this.resize();\n    if(this.type === Pointer.TOUCH_TYPE) {\n      this.domElement.addEventListener(\"touchmove\", this._onPointerMoveBinded);\n      window.addEventListener(\"touchend\", this._onPointerUpBinded);\n    }\n    else {\n      this.domElement.addEventListener(\"mousedown\", this._onPointerDownBinded);\n      window.addEventListener(\"mouseup\", this._onPointerUpBinded);\n    }\n    this.domElement.addEventListener(\"touchstart\", this._onPointerDownBinded);\n    this.domElement.addEventListener(\"mousemove\", this._onPointerMoveBinded);\n    window.addEventListener(\"resize\", this._resizeBinded);\n    Ticker.add(this._updateBinded = this._updateBinded || this._update.bind(this));\n  }\n\n  disable() {\n    Ticker.delete(this._updateBinded);\n    this.domElement.removeEventListener(\"touchstart\", this._onPointerDownBinded);\n    this.domElement.removeEventListener(\"mousedown\", this._onPointerDownBinded);\n    this.domElement.removeEventListener(\"touchmove\", this._onPointerMoveBinded);\n    this.domElement.removeEventListener(\"mousemove\", this._onPointerMoveBinded);\n    window.removeEventListener(\"touchend\", this._onPointerUpBinded);\n    window.removeEventListener(\"mouseup\", this._onPointerUpBinded);\n    window.removeEventListener(\"resize\", this._resizeBinded);\n  }\n}\n","import Ticker from \"../../node_modules/dlib/utils/Ticker.js\";\r\nimport Pointer from \"../../node_modules/dlib/input/Pointer.js\";\r\n\r\nconst POINTER = Pointer.get();\r\n\r\nexport default class NodeLinkElement extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n\r\n    this.in = null;\r\n    this.out = null;\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          // pointer-events: none;\r\n        }\r\n        svg {\r\n          position: absolute;\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n        #scale-marker {\r\n          position: absolute;\r\n          visibility: hidden;\r\n          width: 1px;\r\n          height: 1px;\r\n        }\r\n        path {\r\n          fill: transparent;\r\n          stroke: black;\r\n          stroke-width: 1px;\r\n        }\r\n        path:hover {\r\n          stroke-width: 2px;\r\n          stroke: red;\r\n        }\r\n      </style>\r\n      <div id=\"scale-marker\"></div>\r\n      <svg>\r\n        <path/>\r\n      </svg>\r\n    `;\r\n\r\n    this._svg = this.shadowRoot.querySelector(\"svg\");\r\n    this._path = this.shadowRoot.querySelector(\"path\");\r\n    this._scaleMarker = this.shadowRoot.querySelector(\"#scale-marker\");\r\n\r\n    this._updateBinded = this._update.bind(this);\r\n  }\r\n\r\n  connectedCallback() {\r\n    Ticker.add(this._updateBinded);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    Ticker.delete(this._updateBinded);\r\n  }\r\n\r\n  _update() {\r\n    const rootBoundingRect = this.getBoundingClientRect();\r\n    const scaleMarkerBoundingRect = this._scaleMarker.getBoundingClientRect();\r\n\r\n    let pointerX = (POINTER.x - rootBoundingRect.x) / scaleMarkerBoundingRect.width;\r\n    let pointerY = (POINTER.y - rootBoundingRect.y) / scaleMarkerBoundingRect.height;\r\n\r\n    let inX = pointerX;\r\n    let inY = pointerY;\r\n    if (this.in) {\r\n      const inBoundingRect = this.in.getBoundingClientRect();\r\n      inX = (inBoundingRect.x + inBoundingRect.width * .5 - rootBoundingRect.x) / scaleMarkerBoundingRect.width;\r\n      inY = (inBoundingRect.y + inBoundingRect.height * .5 - rootBoundingRect.y) / scaleMarkerBoundingRect.height;\r\n    }\r\n\r\n    let outX = pointerX;\r\n    let outY = pointerY;\r\n    if (this.out) {\r\n      const outBoundingRect = this.out.getBoundingClientRect();\r\n      outX = (outBoundingRect.x + outBoundingRect.width * .5 - rootBoundingRect.x) / scaleMarkerBoundingRect.width;\r\n      outY = (outBoundingRect.y + outBoundingRect.height * .5 - rootBoundingRect.y) / scaleMarkerBoundingRect.height;\r\n    }\r\n\r\n    this._svg.style.transform = `translate(${Math.min(inX, outX) - 1}px, ${Math.min(inY, outY) - 1}px)`;\r\n    this._svg.style.width = `${Math.abs(inX - outX) + 2}px`;\r\n    this._svg.style.height = `${Math.abs(inY - outY) + 2}px`;\r\n\r\n    if (outX > inX) {\r\n      outX = outX - inX;\r\n      inX = 0;\r\n    } else {\r\n      inX = inX - outX;\r\n      outX = 0;\r\n    }\r\n\r\n    if (outY > inY) {\r\n      outY = outY - inY;\r\n      inY = 0;\r\n    } else {\r\n      inY = inY - outY;\r\n      outY = 0;\r\n    }\r\n\r\n    this._path.setAttribute(\"d\", `M${inX + 1} ${inY + 1} L ${outX + 1} ${outY + 1}`);\r\n    // this._path.setAttribute(\"d\", `M${inX + 1} ${inY + 1} C ${inX + (outX - inX) * .5} ${inY}, ${outX + (inX - outX) * .5} ${outY}, ${outX + 1} ${outY + 1}`);\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node-link\", NodeLinkElement);\r\n","export default class NodeLinkSystemElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"data-listener\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <slot></slot>\r\n    `;\r\n\r\n    this._currentLink = null;\r\n    this._linkMap = new Map();\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (oldValue === newValue) {\r\n      return;\r\n    }\r\n    switch (name) {\r\n      case \"data-listener\":\r\n        this.listener = eval(newValue);\r\n        break;\r\n    }\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.listener = this.listener || this;\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this._removeEventListeners();\r\n  }\r\n\r\n  _onPointerDown(event) {\r\n    if(event.button === 2) {\r\n      \r\n    }\r\n  }\r\n\r\n  _onNodeConnect(event) {\r\n    this._currentLink = document.createElement(\"dnod-node-link\");\r\n    if (event.target.destination) {\r\n      this._currentLink.out = event.target;\r\n    } else {\r\n      this._currentLink.in = event.target;\r\n    }\r\n    this._linkMap.set(this._currentLink.in, this._currentLink);\r\n    this.appendChild(this._currentLink);\r\n  }\r\n\r\n  _onNodeConnected(event) {\r\n    if (this._currentLink.out && this._currentLink.out !== event.target) {\r\n      this._currentLink.in = event.target;\r\n    }\r\n    if (this._currentLink.in && this._currentLink.in !== event.target) {\r\n      this._currentLink.out = event.target;\r\n    }\r\n  }\r\n\r\n  _onNodeDisconnected(event) {\r\n    const link = this._linkMap.get(event.target);\r\n    if (link) {\r\n      link.remove();\r\n    }\r\n  }\r\n\r\n  _removeEventListeners() {\r\n    this._listener.removeEventListener(\"guinodeconnect\", this._onNodeConnectBinded);\r\n    this._listener.removeEventListener(\"guinodeconnected\", this._onNodeConnectedBinded);\r\n    this._listener.removeEventListener(\"guinodedisconnected\", this._onNodeDisconnectedBinded);\r\n    this._listener.removeEventListener(\"pointerdown\", this._onPointerDownBinded);\r\n  }\r\n\r\n  get listener() {\r\n    return this._listener;\r\n  }\r\n\r\n  set listener(value) {\r\n    if (this._listener) {\r\n      this._removeEventListeners();\r\n    }\r\n\r\n    this._listener = value;\r\n\r\n    this._listener.addEventListener(\"guinodeconnect\", this._onNodeConnectBinded = this._onNodeConnectBinded || this._onNodeConnect.bind(this));\r\n    this._listener.addEventListener(\"guinodeconnected\", this._onNodeConnectedBinded = this._onNodeConnectedBinded || this._onNodeConnected.bind(this));\r\n    this._listener.addEventListener(\"guinodedisconnected\", this._onNodeDisconnectedBinded = this._onNodeDisconnectedBinded || this._onNodeDisconnected.bind(this));\r\n    this._listener.addEventListener(\"pointerdown\", this._onPointerDownBinded = this._onPointerDownBinded || this._onPointerDown.bind(this));\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node-link-system\", NodeLinkSystemElement);\r\n","let activeConnector = null;\r\n\r\nexport default class NodeConnectorElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"data-source\", \"data-destination\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          display: inline-block;\r\n          cursor: pointer;\r\n        }\r\n        input {\r\n          cursor: pointer;\r\n          display: inline-block;\r\n          margin: 3px;\r\n        }\r\n      </style>\r\n      <input type=\"radio\" disabled>\r\n      <slot></slot>\r\n    `;\r\n\r\n    this.connectedElements = new Set();\r\n\r\n    this._radio = this.shadowRoot.querySelector(\"input\");\r\n\r\n    this._onSourceChangeBinded = this._onSourceChange.bind(this);\r\n  }\r\n\r\n  connectedCallback() {\r\n    if (this.source) {\r\n      this.source = this.source;\r\n    }\r\n    if (this.destination) {\r\n      this.destination = this.destination;\r\n    }\r\n    this.addEventListener(\"pointerdown\", this._onPointerDown);\r\n    this.addEventListener(\"pointerup\", this._onPointerUp);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.removeEventListener(\"pointerdown\", this._onPointerDown);\r\n    this.removeEventListener(\"pointerup\", this._onPointerUp);\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (oldValue === newValue) {\r\n      return;\r\n    }\r\n    switch (name) {\r\n      case \"data-source\":\r\n        this.source = eval(newValue);\r\n        break;\r\n      case \"data-destination\":\r\n        this.destination = eval(newValue);\r\n        break;\r\n    }\r\n  }\r\n\r\n  _onPointerDown() {\r\n    if (activeConnector) {\r\n      return;\r\n    }\r\n    activeConnector = this;\r\n    this.dispatchEvent(new Event(\"guinodeconnect\", {\r\n      bubbles: true,\r\n      composed: true,\r\n    }));\r\n    window.addEventListener(\"pointerup\", this._onWindowPointerUpBinded = this._onWindowPointerUpBinded || this._onWindowPointerUp.bind(this));\r\n  }\r\n\r\n  _onPointerUp(event) {\r\n    if (!activeConnector || activeConnector === this) {\r\n      return;\r\n    }\r\n    if(activeConnector.destination) {\r\n      this.connect(activeConnector);\r\n    } else {\r\n      activeConnector.connect(this);\r\n    }\r\n    activeConnector = null;\r\n  }\r\n\r\n  _onWindowPointerUp(event) {\r\n    for (const element of event.path) {\r\n      if (element instanceof NodeConnectorElement) {\r\n        return;\r\n      }\r\n    }\r\n    window.removeEventListener(\"pointerup\", this._onWindowPointerUpBinded);\r\n    if (activeConnector) {\r\n      activeConnector.disconnect();\r\n      activeConnector = null;\r\n    }\r\n  }\r\n\r\n  connect(element) {\r\n    if(this.connectedElements.has(element)) {\r\n      return;\r\n    }\r\n    if (element instanceof NodeConnectorElement) {\r\n      element.connected = true;\r\n    }\r\n    this.connectedElements.add(element);\r\n    if (this.value !== undefined) {\r\n      element.value = this.value;\r\n    }\r\n    this.connected = true;\r\n    this.dispatchEvent(new Event(\"guinodeconnected\", {\r\n      bubbles: true,\r\n      composed: true,\r\n    }));\r\n    element.dispatchEvent(new Event(\"guinodeconnected\", {\r\n      bubbles: true,\r\n      composed: true,\r\n    }));\r\n  }\r\n\r\n  disconnect(element) {\r\n    if (element) {\r\n      this.connectedElements.delete(element);\r\n      element.connected = false;\r\n      element.dispatchEvent(new Event(\"guinodedisconnected\", {\r\n        bubbles: true,\r\n        composed: true,\r\n      }));\r\n    }\r\n    this.connected = !!this.connectedElements.size;\r\n\r\n    if (!this.connected) {\r\n      this.dispatchEvent(new Event(\"guinodedisconnected\", {\r\n        bubbles: true,\r\n        composed: true,\r\n      }));\r\n    }\r\n  }\r\n\r\n  _onSourceChange(event) {\r\n    this.value = this.source.value;\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  set value(value) {\r\n    if (value === this._value) {\r\n      return;\r\n    }\r\n    this._value = value;\r\n\r\n    for (const element of this.connectedElements) {\r\n      element.value = this._value;\r\n    }\r\n    if (this.destination) {\r\n      this.destination.value = this._value;\r\n      this.destination.dispatchEvent(new Event(\"input\", {\r\n        bubbles: true,\r\n      }));\r\n      this.destination.dispatchEvent(new Event(\"change\", {\r\n        bubbles: true,\r\n      }));\r\n    }\r\n  }\r\n\r\n  get connected() {\r\n    return this._radio.checked;\r\n  }\r\n\r\n  set connected(value) {\r\n    if (this.destination) {\r\n      this.destination.disabled = value;\r\n    }\r\n    this._radio.checked = value;\r\n  }\r\n\r\n  get source() {\r\n    return this._source;\r\n  }\r\n\r\n  set source(value) {\r\n    if (this._source) {\r\n      this._source.removeEventListener(\"input\", this._onSourceChangeBinded);\r\n      this._source.removeEventListener(\"change\", this._onSourceChangeBinded);\r\n    }\r\n    this._source = value;\r\n    if (!this._source || !this.isConnected) {\r\n      return;\r\n    }\r\n    if (this.destination) {\r\n      this.value = this._source.value;\r\n    }\r\n    this._source.addEventListener(\"input\", this._onSourceChangeBinded);\r\n    this._source.addEventListener(\"change\", this._onSourceChangeBinded);\r\n  }\r\n\r\n  get destination() {\r\n    return this._destination;\r\n  }\r\n\r\n  set destination(value) {\r\n    this._destination = value;\r\n    if (!this.isConnected) {\r\n      return;\r\n    }\r\n    if (this.value !== undefined) {\r\n      this._destination.value = this.value;\r\n    }\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node-connector\", NodeConnectorElement);\r\n","export default class SelectInputNodeElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"name\", \"value\", \"disabled\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.type = \"select\";\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          width: 250px;\r\n          display: grid;\r\n          grid-template-columns: auto auto auto 1fr auto;\r\n          grid-gap: 5px;\r\n          align-items: center;\r\n        }\r\n        select {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      </style>\r\n      <dnod-node-connector data-destination=\"this.getRootNode().host\"></dnod-node-connector>\r\n      <dnod-draggable-handle data-target=\"this.getRootNode().host\"></dnod-draggable-handle>\r\n      <label></label>\r\n      <select></select>\r\n      <dnod-node-connector data-source=\"this.getRootNode().host\"></dnod-node-connector>\r\n    `;\r\n\r\n    this._optionsMap = new Map();\r\n\r\n    this._select = this.shadowRoot.querySelector(\"select\");\r\n    this._label = this.shadowRoot.querySelector(\"label\");\r\n\r\n    const onInput = (event) => {\r\n      this.dispatchEvent(new event.constructor(event.type, event));\r\n    };\r\n    this.shadowRoot.addEventListener(\"input\", onInput);\r\n    this.shadowRoot.addEventListener(\"change\", onInput);\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    switch (name) {\r\n      case \"disabled\":\r\n        this[name] = newValue !== null;\r\n        break;\r\n      case \"value\":\r\n        this[name] = this.defaultValue = newValue;\r\n        break;\r\n      default:\r\n        this[name] = newValue;\r\n        break;\r\n    }\r\n  }\r\n\r\n  set options(value) {\r\n    this._options = value instanceof Array ? value : JSON.parse(`[${value}]`);\r\n    this._select.innerHTML = \"\";\r\n    for (let option of this._options) {\r\n      const optionElement = document.createElement(\"option\");\r\n      const stringifiedOption = typeof option === \"object\" ? JSON.stringify(option) : option.toString();\r\n      optionElement.value = stringifiedOption;\r\n      optionElement.text = stringifiedOption;\r\n      optionElement.selected = option === this.value;\r\n      this._select.add(optionElement);\r\n      this._optionsMap.set(stringifiedOption, option);\r\n    }\r\n    this.value = this._value;\r\n  }\r\n\r\n  get options() {\r\n    return this._options;\r\n  }\r\n\r\n  get value() {\r\n    return this._optionsMap.get(this._select.value);\r\n  }\r\n\r\n  set value(value) {\r\n    this._value = value;\r\n    this._select.value = value;\r\n  }\r\n\r\n  get name() {\r\n    return this._select.name;\r\n  }\r\n\r\n  set name(value) {\r\n    this._label.textContent = value;\r\n    this._select.name = value;\r\n  }\r\n\r\n  set disabled(value) {\r\n    this._select.disabled = value;\r\n  }\r\n\r\n  get disabled() {\r\n    return this._select.disabled;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: this.name,\r\n      type: this.type,\r\n      value: this.value,\r\n      options: this.options,\r\n    };\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node-input-select\", SelectInputNodeElement);\r\n","export default class ButtonInputNodeElement extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return [\"name\", \"value\", \"disabled\"];\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.type = \"button\";\r\n\r\n    this.attachShadow({ mode: \"open\" }).innerHTML = `\r\n      <style>\r\n        :host {\r\n          width: 250px;\r\n          display: grid;\r\n          grid-template-columns: auto auto 1fr auto;\r\n          grid-gap: 5px;\r\n          align-items: center;\r\n        }\r\n        button {\r\n          width: 100%;\r\n          height: 100%;\r\n        }\r\n      </style>\r\n      <dnod-node-connector data-destination=\"this.getRootNode().host\"></dnod-node-connector>\r\n      <dnod-draggable-handle data-target=\"this.getRootNode().host\"></dnod-draggable-handle>\r\n      <button>\r\n        <slot></slot>\r\n      </button>\r\n      <dnod-node-connector data-source=\"this.getRootNode().host\"></dnod-node-connector>\r\n    `;\r\n\r\n    this._slot = this.shadowRoot.querySelector(\"slot\");\r\n    this._button = this.shadowRoot.querySelector(\"button\");\r\n\r\n    this._button.onclick = (event) => {\r\n      if (typeof this.value === \"function\") {\r\n        this.value();\r\n      }\r\n      this.dispatchEvent(new event.constructor(\"input\", event));\r\n    };\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (name in this) {\r\n      this[name] = newValue;\r\n    } else {\r\n      this._button.setAttribute(name, newValue);\r\n    }\r\n  }\r\n\r\n  set name(value) {\r\n    this._slot.textContent = value;\r\n    this._name = value;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get disabled() {\r\n    return this._button.disabled;\r\n  }\r\n\r\n  set disabled(value) {\r\n    this._button.disabled = value;\r\n  }\r\n\r\n  set value(value) {\r\n    this._value = value;\r\n    this.dispatchEvent(new Event(\"change\", {\r\n      bubbles: true,\r\n    }));\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: this.name,\r\n      type: this.type,\r\n      value: this.value,\r\n    };\r\n  }\r\n}\r\n\r\nwindow.customElements.define(\"dnod-node-input-button\", ButtonInputNodeElement);\r\n"],"names":["glMatrix.ARRAY_TYPE","vec2.distance","vec2.set","vec2.copy","vec2.add","vec2.length","vec2.squaredLength","vec2.subtract","vec2.negate","vec2.cross","vec2.scale","vec2.normalize","vec2.dot","vec2.exactEquals","vec2.transformMat3","vec2.transformMat4","vec2.lerp","Ticker"],"mappings":"AAAe,MAAM,WAAW,SAAS,WAAW,CAAC;EACnD,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;GACtE;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA6CjD,CAAC,CAAC;;IAEF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;;IAEzD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;GAClB;;EAED,iBAAiB,GAAG;IAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;GACvB;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,IAAI,QAAQ,KAAK,QAAQ,EAAE;MACzB,OAAO;KACR;IACD,QAAQ,IAAI;MACV,KAAK,UAAU;QACb,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,QAAQ,KAAK,IAAI,CAAC;QAC9C,MAAM;MACR,KAAK,WAAW;QACd,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;QAC7E,MAAM;MACR;QACE,IAAI,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;QACtB,MAAM;KACT;GACF;;EAED,IAAI,IAAI,CAAC,KAAK,EAAE;IACd,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;GACjE;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,IAAI,CAAC,KAAK,CAAC;GACnB;;EAED,IAAI,IAAI,CAAC,KAAK,EAAE;IACd,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,KAAK,CAAC;GAC5B;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;GAC3B;;EAED,IAAI,CAAC,GAAG;IACN,OAAO,IAAI,CAAC,EAAE,CAAC;GAChB;;EAED,IAAI,CAAC,CAAC,KAAK,EAAE;IACX,IAAI,CAAC,EAAE,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;IAC5B,IAAI,CAAC,mBAAmB,EAAE,CAAC;GAC5B;;EAED,IAAI,CAAC,GAAG;IACN,OAAO,IAAI,CAAC,EAAE,CAAC;GAChB;;EAED,IAAI,CAAC,CAAC,KAAK,EAAE;IACX,IAAI,CAAC,EAAE,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;IAC5B,IAAI,CAAC,mBAAmB,EAAE,CAAC;GAC5B;;EAED,IAAI,KAAK,GAAG;IACV,OAAO,IAAI,CAAC,MAAM,CAAC;GACpB;;EAED,IAAI,KAAK,CAAC,KAAK,EAAE;IACf,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;IAChC,IAAI,CAAC,mBAAmB,EAAE,CAAC;GAC5B;;EAED,IAAI,MAAM,GAAG;IACX,OAAO,IAAI,CAAC,OAAO,CAAC;GACrB;;EAED,IAAI,MAAM,CAAC,KAAK,EAAE;IAChB,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;IACjC,IAAI,CAAC,mBAAmB,EAAE,CAAC;GAC5B;;EAED,mBAAmB,GAAG;IACpB,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAChC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC/B,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IACrC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;GACxC;;EAED,MAAM,GAAG;IACP,OAAO;MACL,IAAI,EAAE,IAAI,CAAC,IAAI;KAChB,CAAC;GACH;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;;ACpJvD,gBAAe;IACX,YAAY,EAAE;QACV,QAAQ,EAAE,wBAAwB;QAClC,UAAU,EAAE,0BAA0B;QACtC,OAAO,EAAE,uBAAuB;QAChC,QAAQ,EAAE,wBAAwB;QAClC,OAAO,EAAE,uBAAuB;QAChC,QAAQ,EAAE,wBAAwB;QAClC,MAAM,EAAE,sBAAsB;KACjC;IACD,aAAa,EAAE;QACX,MAAM,EAAE,CAAC,UAAU,KAAK,OAAO,UAAU,CAAC,KAAK,KAAK,QAAQ;QAC5D,OAAO,EAAE,CAAC,UAAU,KAAK,OAAO,UAAU,CAAC,KAAK,KAAK,QAAQ;QAC7D,UAAU,EAAE,CAAC,UAAU,KAAK,OAAO,UAAU,CAAC,KAAK,KAAK,SAAS;QACjE,QAAQ,EAAE,CAAC,UAAU,KAAK,OAAO,UAAU,CAAC,KAAK,KAAK,UAAU;QAChE,OAAO,EAAE,CAAC,UAAU,KAAK;YACrB,OAAO,OAAO,UAAU,CAAC,KAAK,KAAK,QAAQ,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,OAAO,UAAU,CAAC,KAAK,KAAK,QAAQ,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,SAAS,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,SAAS,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC;SAC1V;QACD,QAAQ,EAAE,CAAC,UAAU,KAAK,CAAC,CAAC,UAAU,CAAC,OAAO;KACjD;CACJ,CAAC;;ACpBF,IAAI,cAAc,CAAC;;AAEnB,AAAe,MAAM,gBAAgB,SAAS,WAAW,CAAC;EACxD,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,uBAAuB,CAAC,CAAC;GAC7E;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAiCjD,CAAC,CAAC;;IAEF,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;;IAEpB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;;IAE5B,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;;IAE5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;;IAEvB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACpB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;;IAEpB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;;IAElB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;IACrB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;;IAErB,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7D,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3D,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GACxD;;EAED,iBAAiB,GAAG;IAClB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;GACjC;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,IAAI,QAAQ,KAAK,QAAQ,EAAE;MACzB,OAAO;KACR;IACD,QAAQ,IAAI;MACV,KAAK,WAAW;QACd,IAAI,CAAC,SAAS,GAAG,QAAQ,KAAK,MAAM,CAAC;QACrC,MAAM;MACR,KAAK,aAAa;QAChB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,MAAM;MACR,KAAK,aAAa;QAChB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,MAAM;MACR,KAAK,uBAAuB;QAC1B,IAAI,CAAC,cAAc,GAAG,QAAQ,KAAK,MAAM,CAAC;QAC1C,MAAM;KACT;GACF;;EAED,IAAI,MAAM,GAAG;IACX,OAAO,IAAI,CAAC,OAAO,CAAC;GACrB;;EAED,IAAI,MAAM,CAAC,KAAK,EAAE;IAChB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;GACjC;;EAED,IAAI,MAAM,GAAG;IACX,OAAO,IAAI,CAAC,OAAO,CAAC;GACrB;;EAED,IAAI,MAAM,CAAC,KAAK,EAAE;IAChB,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC1E,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;GACjC;;EAED,IAAI,SAAS,GAAG;IACd,OAAO,IAAI,CAAC,UAAU,CAAC;GACxB;;EAED,IAAI,SAAS,CAAC,KAAK,EAAE;IACnB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;;IAExB,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;;IAExB,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;;IAE1E,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;MAChB,OAAO;KACR;;IAED,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;;IAEzE,IAAI,IAAI,CAAC,SAAS,EAAE;MAClB,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;MACvE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;KACvE;GACF;;EAED,eAAe,CAAC,KAAK,EAAE;IACrB,KAAK,CAAC,cAAc,EAAE,CAAC;GACxB;;EAED,cAAc,CAAC,KAAK,EAAE;IACpB,IAAI,cAAc,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,WAAW,CAAC,KAAK,OAAO,EAAE;MACpI,OAAO;KACR;;IAED,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,UAAU,CAAC;;IAE1C,KAAK,MAAM,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE;MAChC,IAAI,OAAO,YAAY,gBAAgB,IAAI,OAAO,CAAC,cAAc,EAAE;QACjE,IAAI,CAAC,kBAAkB,IAAI,OAAO,CAAC,UAAU,CAAC;OAC/C;KACF;;IAED,cAAc,GAAG,IAAI,CAAC;;IAEtB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC;IAC3D,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC;IAC3D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;IACxC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;;IAEvC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,WAAW,CAAC;IAC5C,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;IACtF,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC9D,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,qBAAqB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;GACtF;;EAED,cAAc,CAAC,KAAK,EAAE;IACpB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;GAC7K;;EAED,YAAY,CAAC,KAAK,EAAE;IAClB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;IACnC,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IACrE,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;IACjE,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;IACpE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC5G,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC3G,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAC;;IAEjC,cAAc,GAAG,IAAI,CAAC;GACvB;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;;ACnLlD,MAAM,eAAe,SAAS,WAAW,CAAC;EACvD,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,eAAe,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;GAChD;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;IAsBjD,CAAC,CAAC;;IAEF,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;IACd,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;IACrB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;GAChB;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,IAAI,QAAQ,KAAK,QAAQ,EAAE;MACzB,OAAO;KACR;IACD,QAAQ,IAAI;MACV,KAAK,eAAe;QAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ,CAAC,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC/D,MAAM;MACR;QACE,IAAI,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;QAClC,MAAM;KACT;GACF;;EAED,iBAAiB,GAAG;IAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC;GACvC;;EAED,oBAAoB,GAAG;IACrB,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;GACxD;;EAED,QAAQ,CAAC,KAAK,EAAE;IACd,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,SAAS,CAAC;IACvC,IAAI,CAAC,IAAI,IAAI,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC;GACxC;;EAED,IAAI,QAAQ,GAAG;IACb,OAAO,IAAI,CAAC,SAAS,CAAC;GACvB;;EAED,IAAI,QAAQ,CAAC,KAAK,EAAE;IAClB,IAAI,IAAI,CAAC,SAAS,EAAE;MAClB,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;KAClE;IACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACvB,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;GACjH;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,IAAI,CAAC,KAAK,CAAC;GACnB;;EAED,IAAI,IAAI,CAAC,KAAK,EAAE;;IAEd,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;MACxB,OAAO;KACR;;IAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;IAEnB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;;IAEhE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;IAE9C,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;GACvC;;EAED,IAAI,GAAG,GAAG;IACR,OAAO,IAAI,CAAC,IAAI,CAAC;GAClB;;EAED,IAAI,GAAG,CAAC,KAAK,EAAE;IACb,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;IAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;GACvB;;EAED,IAAI,GAAG,GAAG;IACR,OAAO,IAAI,CAAC,IAAI,CAAC;GAClB;;EAED,IAAI,GAAG,CAAC,KAAK,EAAE;IACb,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;IAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;GACvB;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,eAAe,EAAE,eAAe,CAAC,CAAC;;AC/GhD,MAAM,UAAU,SAAS,WAAW,CAAC;EAClD,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA4BjD,CAAC,CAAC;;IAEF,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;IAChE,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;;IAElE,QAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM;MACtC,SAAS,CAAC,UAAU,GAAG,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC;KAC1C,CAAC,CAAC;;IAEH,IAAI,CAAC,aAAa,GAAG,IAAI,GAAG,EAAE,CAAC;GAChC;;EAED,IAAI,SAAS,GAAG;IACd,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;GACrE;;EAED,IAAI,SAAS,CAAC,KAAK,EAAE;IACnB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACpB,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;MACtB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;QACd,KAAK,MAAM,eAAe,IAAI,SAAS,CAAC,aAAa,EAAE;UACrD,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,GAAG,eAAe,GAAG,IAAI,CAAC,IAAI,CAAC;SAC1F;OACF;;MAED,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;QAC5B,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAC;OAC/B;;MAED,IAAI,WAAW,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;MAC9H,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;MAC/C,MAAM,CAAC,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;MACjC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;KAC/B;GACF;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;;AC1E9C,MAAM,MAAM,SAAS,GAAG,CAAC;EACtC,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,iBAAiB,GAAG,IAAI,GAAG,EAAE,CAAC;GACpC;;EAED,GAAG,CAAC,KAAK,EAAE,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,EAAE;IAC9B,GAAG,IAAI,EAAE;MACP,MAAM,mBAAmB,GAAG,MAAM;QAChC,KAAK,CAAC,GAAG,SAAS,CAAC,CAAC;QACpB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;OACpB,CAAC;MACF,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,KAAK,EAAE,mBAAmB,CAAC,CAAC;MACvD,KAAK,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;KAChC,MAAM;MACL,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;KAClB;GACF;;EAED,MAAM,CAAC,KAAK,EAAE;IACZ,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC;IACzD,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;GACtC;;EAED,QAAQ,CAAC,KAAK,EAAE;IACd,KAAK,IAAI,QAAQ,IAAI,IAAI,EAAE;MACzB,QAAQ,CAAC,KAAK,CAAC,CAAC;KACjB;GACF;CACF;;AC5BD,MAAM,MAAM,SAAS,MAAM,CAAC;EAC1B,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAE7C,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC;IAC5C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC;IAC/B,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;IACnB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;;IAEnB,IAAI,CAAC,OAAO,EAAE,CAAC;GAChB;;EAED,OAAO,GAAG;IACR,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;;IAE1C,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC;IAC7C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC;IAChD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC;IAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC;;IAE/B,IAAI,CAAC,QAAQ,EAAE,CAAC;GACjB;CACF;;AAED,eAAe,IAAI,MAAM,EAAE,CAAC;;AC5B5B;;;;AAIA,AAGO,IAAI,UAAU,GAAG,CAAC,OAAO,YAAY,KAAK,WAAW,IAAI,YAAY,GAAG,KAAK,CAAC;AACrF,AAUA;AACA,MAAM,MAAM,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;;ACjB7B;;;;;;;;;;AAUA,AAAO,SAAS,MAAM,GAAG;EACvB,IAAI,GAAG,GAAG,IAAIA,UAAmB,CAAC,CAAC,CAAC,CAAC;EACrC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACX,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACX,OAAO,GAAG,CAAC;CACZ;AACD,AA2BA;;;;;;;;AAQA,AAAO,SAAS,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE;EAC3B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,OAAO,GAAG,CAAC;CACZ;;;;;;;;;;AAUD,AAAO,SAAS,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAC7B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACX,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACX,OAAO,GAAG,CAAC;CACZ;;;;;;;;;;AAUD,AAAO,SAAS,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAC7B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,OAAO,GAAG,CAAC;CACZ;;;;;;;;;;AAUD,AAAO,SAAS,QAAQ,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAClC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACrB,OAAO,GAAG,CAAC;CACZ;AACD,AA+FA;;;;;;;;;AASA,AAAO,SAAS,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAC/B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EAClB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EAClB,OAAO,GAAG,CAAC;CACZ;AACD,AAeA;;;;;;;;AAQA,AAAO,SAAS,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE;EAC7B,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;CAC7B;AACD,AAaA;;;;;;;AAOA,AAAO,SAAS,MAAM,CAAC,CAAC,EAAE;EACxB,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACX,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;CAC7B;;;;;;;;AAQD,AAAO,SAAS,aAAa,EAAE,CAAC,EAAE;EAChC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACX,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;CAClB;;;;;;;;;AASD,AAAO,SAAS,MAAM,CAAC,GAAG,EAAE,CAAC,EAAE;EAC7B,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,OAAO,GAAG,CAAC;CACZ;AACD,AAaA;;;;;;;;AAQA,AAAO,SAAS,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE;EAChC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACX,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACpB,IAAI,GAAG,GAAG,CAAC,EAAE;;IAEX,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACzB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;IACpB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;GACrB;EACD,OAAO,GAAG,CAAC;CACZ;;;;;;;;;AASD,AAAO,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE;EACxB,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;CAClC;;;;;;;;;;;AAWD,AAAO,SAAS,KAAK,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAC/B,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EAClC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACpB,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACX,OAAO,GAAG,CAAC;CACZ;;;;;;;;;;;AAWD,AAAO,SAAS,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;EACjC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;EAC9B,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;EAC9B,OAAO,GAAG,CAAC;CACZ;AACD,AA+CA;;;;;;;;;;AAUA,AAAO,SAAS,aAAa,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EACvC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACV,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACX,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACpC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACpC,OAAO,GAAG,CAAC;CACZ;;;;;;;;;;;;AAYD,AAAO,SAAS,aAAa,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EACvC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;EACrC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;EACrC,OAAO,GAAG,CAAC;CACZ;AACD,AAqEA;;;;;;;;AAQA,AAAO,SAAS,WAAW,CAAC,CAAC,EAAE,CAAC,EAAE;EAChC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;CACvC;AACD,AAwDA;;;;;;;;;;;;;AAaA,AAAO,MAAM,OAAO,GAAG,CAAC,WAAW;EACjC,IAAI,GAAG,GAAG,MAAM,EAAE,CAAC;;EAEnB,OAAO,SAAS,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE;IACjD,IAAI,CAAC,EAAE,CAAC,CAAC;IACT,GAAG,CAAC,MAAM,EAAE;MACV,MAAM,GAAG,CAAC,CAAC;KACZ;;IAED,GAAG,CAAC,MAAM,EAAE;MACV,MAAM,GAAG,CAAC,CAAC;KACZ;;IAED,GAAG,KAAK,EAAE;MACR,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,MAAM,IAAI,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;KACnD,MAAM;MACL,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;KACd;;IAED,IAAI,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,MAAM,EAAE;MAClC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC/B,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;MAClB,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;KAChC;;IAED,OAAO,CAAC,CAAC;GACV,CAAC;CACH,GAAG,CAAC;;AC5mBU,MAAM,OAAO,SAAS,YAAY,CAAC;EAChD,OAAO,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE;IAClC,OAAOC,QAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;GAC1C;;EAED,WAAW,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;IAC1B,KAAK,CAAC,KAAK,CAAC,CAAC;IACb,OAAO,IAAI,CAAC;GACb;;EAED,IAAI,CAAC,GAAG;IACN,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;GAChB;;EAED,IAAI,CAAC,CAAC,KAAK,EAAE;IACX,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;GACjB;;EAED,IAAI,CAAC,GAAG;IACN,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;GAChB;;EAED,IAAI,CAAC,CAAC,KAAK,EAAE;IACX,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;GACjB;;EAED,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE;IACRC,GAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACrB,OAAO,IAAI,CAAC;GACb;;EAED,IAAI,CAAC,OAAO,EAAE;IACZC,IAAS,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACzB,OAAO,IAAI,CAAC;GACb;;EAED,GAAG,CAAC,OAAO,EAAE;IACXC,GAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IAC9B,OAAO,IAAI,CAAC;GACb;;EAED,IAAI,IAAI,GAAG;IACT,OAAOC,MAAW,CAAC,IAAI,CAAC,CAAC;GAC1B;;EAED,IAAI,WAAW,GAAG;IAChB,OAAOC,aAAkB,CAAC,IAAI,CAAC,CAAC;GACjC;;EAED,QAAQ,CAAC,OAAO,EAAE;IAChBC,QAAa,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACnC,OAAO,IAAI,CAAC;GACb;;EAED,MAAM,CAAC,OAAO,GAAG,IAAI,EAAE;IACrBC,MAAW,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IAC3B,OAAO,IAAI,CAAC;GACb;;EAED,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE;IACxBC,KAAU,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;IACrC,OAAO,IAAI,CAAC;GACb;;EAED,KAAK,CAAC,KAAK,EAAE;IACXC,KAAU,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;IAC9B,OAAO,IAAI,CAAC;GACb;;EAED,SAAS,GAAG;IACVC,SAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;GAC5B;;EAED,GAAG,CAAC,OAAO,EAAE;IACX,OAAOC,GAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;GAChC;;EAED,QAAQ,CAAC,OAAO,EAAE;IAChB,OAAO,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;GACxC;;EAED,MAAM,CAAC,OAAO,EAAE;IACd,OAAOC,WAAgB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;GACxC;;EAED,YAAY,CAAC,OAAO,EAAE;IACpBC,aAAkB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACxC,OAAO,IAAI,CAAC;GACb;;EAED,YAAY,CAAC,OAAO,EAAE;IACpBC,aAAkB,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IACxC,OAAO,IAAI,CAAC;GACb;;EAED,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE;IACnBC,IAAS,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;GACvC;;EAED,KAAK,GAAG;IACN,OAAO,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC;GAC1B;CACF;;ACpGD,IAAI,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;;AAEzB,AAAe,MAAM,OAAO,SAAS,OAAO,CAAC;EAC3C,WAAW,UAAU,GAAG;IACtB,OAAO,WAAW,CAAC;GACpB;;EAED,WAAW,UAAU,GAAG;IACtB,OAAO,WAAW,CAAC;GACpB;;EAED,OAAO,GAAG,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,EAAE;IACrC,IAAI,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACvC,IAAI,CAAC,OAAO,EAAE;MACZ,OAAO,GAAG,IAAI,OAAO,CAAC,UAAU,CAAC,CAAC;KACnC;IACD,OAAO,OAAO,CAAC;GAChB;;EAED,IAAI,MAAM,GAAG;IACX,OAAO,IAAI,CAAC,OAAO,CAAC;GACrB;;EAED,WAAW,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,EAAE;IACtC,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;;IAE7B,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,UAAU,CAAC;;IAE/B,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,EAAE,CAAC;IAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,OAAO,EAAE,CAAC;;IAEhC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,EAAE,CAAC;IAC9B,IAAI,CAAC,gBAAgB,GAAG,IAAI,OAAO,EAAE,CAAC;IACtC,IAAI,CAAC,UAAU,GAAG,IAAI,OAAO,EAAE,CAAC;IAChC,IAAI,CAAC,kBAAkB,GAAG,IAAI,OAAO,EAAE,CAAC;IACxC,IAAI,CAAC,kBAAkB,GAAG,IAAI,OAAO,EAAE,CAAC;IACxC,IAAI,CAAC,0BAA0B,GAAG,IAAI,OAAO,EAAE,CAAC;;IAEhD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;;IAErB,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;;IAEpC,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;IAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC;IAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,MAAM,EAAE,CAAC;IACzB,IAAI,CAAC,OAAO,GAAG,IAAI,MAAM,EAAE,CAAC;IAC5B,IAAI,CAAC,YAAY,GAAG,IAAI,MAAM,EAAE,CAAC;;IAEjC,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;;IAErC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3D,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAEvD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;IAE5C,IAAI,CAAC,MAAM,EAAE,CAAC;;IAEd,IAAI,CAAC,SAAS,GAAG,IAAI,OAAO,EAAE,CAAC;;IAE/B,IAAI,CAAC,MAAM,EAAE,CAAC;GACf;;EAED,MAAM,GAAG;IACP,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE,CAAC;GACxE;;EAED,cAAc,CAAC,CAAC,EAAE;IAChB,GAAG,CAAC,CAAC,IAAI,KAAK,YAAY,EAAE;MAC1B,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;MACpC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;KACtC;IACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACpB,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAC1B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;IACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;GACzB;;EAED,cAAc,CAAC,CAAC,EAAE;IAChB,GAAG,CAAC,CAAC,IAAI,KAAK,WAAW,EAAE;MACzB,GAAG,IAAI,CAAC,uBAAuB,EAAE;QAC/B,OAAO;OACR,MAAM;QACL,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;OACtC;KACF;IACD,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;IACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;GACzB;;EAED,YAAY,CAAC,CAAC,EAAE;IACd,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE;MAChB,OAAO;KACR;IACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACrB,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;IACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACxB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACtB,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;KAC1B;IACD,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5B,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC,MAAM;MAC/B,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;KACtC,EAAE,IAAI,CAAC,CAAC;GACV;;EAED,eAAe,CAAC,CAAC,EAAE;IACjB,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,IAAI,CAAC,YAAY,MAAM,CAAC,UAAU,EAAE;MACzD,GAAG,CAAC,CAAC,IAAI,KAAK,UAAU,EAAE;QACxB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;OACzB,MAAM;QACL,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;OAClB;KACF;IACD,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC;IACjE,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC;GACjE;;EAED,WAAW,CAAC,IAAI,EAAE;IAChB,GAAG,IAAI,CAAC,IAAI,KAAK,IAAI,EAAE;MACrB,OAAO;KACR;IACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,IAAI,CAAC,OAAO,EAAE,CAAC;IACf,IAAI,CAAC,MAAM,EAAE,CAAC;IACd,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GACvC;;EAED,OAAO,GAAG;IACR,GAAG,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE;MACnB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;MAC5C,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;MAC5C,GAAG,IAAI,CAAC,MAAM,EAAE;QACd,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;OACpC;KACF;;IAED,IAAI,CAAC,gBAAgB,EAAE,CAAC;GACzB;;EAED,gBAAgB,GAAG;IACjB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IAC1B,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;;IAE1B,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;MACrB,OAAO;KACR;;IAED,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,KAAK,GAAG,EAAE,CAAC;IAC7F,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,GAAG,EAAE,CAAC;IAC9F,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;;IAE9B,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC;IAC5F,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC;IAC7F,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;;IAE1D,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,0BAA0B,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC1F,IAAI,CAAC,kBAAkB,CAAC,CAAC,GAAG,IAAI,CAAC,0BAA0B,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IAC1F,IAAI,CAAC,0BAA0B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;GACzC;;EAED,MAAM,GAAG;IACP,IAAI,CAAC,OAAO,EAAE,CAAC;IACf,IAAI,CAAC,MAAM,EAAE,CAAC;IACd,GAAG,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,UAAU,EAAE;MACnC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;MACzE,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;KAC9D;SACI;MACH,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;MACzE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;KAC7D;IACD,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC1E,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IACzE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACtDC,QAAM,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;GAChF;;EAED,OAAO,GAAG;IACRA,QAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAClC,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,YAAY,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC7E,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC5E,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC5E,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAC5E,MAAM,CAAC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAChE,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC/D,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;GAC1D;CACF;;ACnMD,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC;;AAE9B,AAAe,MAAM,eAAe,SAAS,WAAW,CAAC;EACvD,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC;IACf,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;;IAEhB,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAiCjD,CAAC,CAAC;;IAEF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACjD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;;IAEnE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAC9C;;EAED,iBAAiB,GAAG;IAClBA,QAAM,CAAC,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;GAChC;;EAED,oBAAoB,GAAG;IACrBA,QAAM,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;GACnC;;EAED,OAAO,GAAG;IACR,MAAM,gBAAgB,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;IACtD,MAAM,uBAAuB,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,EAAE,CAAC;;IAE1E,IAAI,QAAQ,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,IAAI,uBAAuB,CAAC,KAAK,CAAC;IAChF,IAAI,QAAQ,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,gBAAgB,CAAC,CAAC,IAAI,uBAAuB,CAAC,MAAM,CAAC;;IAEjF,IAAI,GAAG,GAAG,QAAQ,CAAC;IACnB,IAAI,GAAG,GAAG,QAAQ,CAAC;IACnB,IAAI,IAAI,CAAC,EAAE,EAAE;MACX,MAAM,cAAc,GAAG,IAAI,CAAC,EAAE,CAAC,qBAAqB,EAAE,CAAC;MACvD,GAAG,GAAG,CAAC,cAAc,CAAC,CAAC,GAAG,cAAc,CAAC,KAAK,GAAG,EAAE,GAAG,gBAAgB,CAAC,CAAC,IAAI,uBAAuB,CAAC,KAAK,CAAC;MAC1G,GAAG,GAAG,CAAC,cAAc,CAAC,CAAC,GAAG,cAAc,CAAC,MAAM,GAAG,EAAE,GAAG,gBAAgB,CAAC,CAAC,IAAI,uBAAuB,CAAC,MAAM,CAAC;KAC7G;;IAED,IAAI,IAAI,GAAG,QAAQ,CAAC;IACpB,IAAI,IAAI,GAAG,QAAQ,CAAC;IACpB,IAAI,IAAI,CAAC,GAAG,EAAE;MACZ,MAAM,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,qBAAqB,EAAE,CAAC;MACzD,IAAI,GAAG,CAAC,eAAe,CAAC,CAAC,GAAG,eAAe,CAAC,KAAK,GAAG,EAAE,GAAG,gBAAgB,CAAC,CAAC,IAAI,uBAAuB,CAAC,KAAK,CAAC;MAC7G,IAAI,GAAG,CAAC,eAAe,CAAC,CAAC,GAAG,eAAe,CAAC,MAAM,GAAG,EAAE,GAAG,gBAAgB,CAAC,CAAC,IAAI,uBAAuB,CAAC,MAAM,CAAC;KAChH;;IAED,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACpG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACxD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;;IAEzD,IAAI,IAAI,GAAG,GAAG,EAAE;MACd,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC;MAClB,GAAG,GAAG,CAAC,CAAC;KACT,MAAM;MACL,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;MACjB,IAAI,GAAG,CAAC,CAAC;KACV;;IAED,IAAI,IAAI,GAAG,GAAG,EAAE;MACd,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC;MAClB,GAAG,GAAG,CAAC,CAAC;KACT,MAAM;MACL,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;MACjB,IAAI,GAAG,CAAC,CAAC;KACV;;IAED,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;GAElF;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,gBAAgB,EAAE,eAAe,CAAC,CAAC;;AC9GjD,MAAM,qBAAqB,SAAS,WAAW,CAAC;EAC7D,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,eAAe,CAAC,CAAC;GAC1B;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;IAEjD,CAAC,CAAC;;IAEF,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;GAC3B;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,IAAI,QAAQ,KAAK,QAAQ,EAAE;MACzB,OAAO;KACR;IACD,QAAQ,IAAI;MACV,KAAK,eAAe;QAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/B,MAAM;KACT;GACF;;EAED,iBAAiB,GAAG;IAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC;GACvC;;EAED,oBAAoB,GAAG;IACrB,IAAI,CAAC,qBAAqB,EAAE,CAAC;GAC9B;;EAED,cAAc,CAAC,KAAK,EAAE;IACpB,GAAG,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,CAEtB;GACF;;EAED,cAAc,CAAC,KAAK,EAAE;IACpB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;IAC7D,IAAI,KAAK,CAAC,MAAM,CAAC,WAAW,EAAE;MAC5B,IAAI,CAAC,YAAY,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;KACtC,MAAM;MACL,IAAI,CAAC,YAAY,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;KACrC;IACD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IAC3D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;GACrC;;EAED,gBAAgB,CAAC,KAAK,EAAE;IACtB,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,KAAK,KAAK,CAAC,MAAM,EAAE;MACnE,IAAI,CAAC,YAAY,CAAC,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;KACrC;IACD,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE,KAAK,KAAK,CAAC,MAAM,EAAE;MACjE,IAAI,CAAC,YAAY,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;KACtC;GACF;;EAED,mBAAmB,CAAC,KAAK,EAAE;IACzB,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC7C,IAAI,IAAI,EAAE;MACR,IAAI,CAAC,MAAM,EAAE,CAAC;KACf;GACF;;EAED,qBAAqB,GAAG;IACtB,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,gBAAgB,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAChF,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;IACpF,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,qBAAqB,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;IAC1F,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;GAC9E;;EAED,IAAI,QAAQ,GAAG;IACb,OAAO,IAAI,CAAC,SAAS,CAAC;GACvB;;EAED,IAAI,QAAQ,CAAC,KAAK,EAAE;IAClB,IAAI,IAAI,CAAC,SAAS,EAAE;MAClB,IAAI,CAAC,qBAAqB,EAAE,CAAC;KAC9B;;IAED,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;;IAEvB,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC3I,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACnJ,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,qBAAqB,EAAE,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,yBAAyB,IAAI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/J,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;GACzI;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,uBAAuB,EAAE,qBAAqB,CAAC,CAAC;;AC7F7E,IAAI,eAAe,GAAG,IAAI,CAAC;;AAE3B,AAAe,MAAM,oBAAoB,SAAS,WAAW,CAAC;EAC5D,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,aAAa,EAAE,kBAAkB,CAAC,CAAC;GAC5C;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;IAcjD,CAAC,CAAC;;IAEF,IAAI,CAAC,iBAAiB,GAAG,IAAI,GAAG,EAAE,CAAC;;IAEnC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;;IAErD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAC9D;;EAED,iBAAiB,GAAG;IAClB,IAAI,IAAI,CAAC,MAAM,EAAE;MACf,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;KAC3B;IACD,IAAI,IAAI,CAAC,WAAW,EAAE;MACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC;KACrC;IACD,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAC1D,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;GACvD;;EAED,oBAAoB,GAAG;IACrB,IAAI,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IAC7D,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;GAC1D;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,IAAI,QAAQ,KAAK,QAAQ,EAAE;MACzB,OAAO;KACR;IACD,QAAQ,IAAI;MACV,KAAK,aAAa;QAChB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,MAAM;MACR,KAAK,kBAAkB;QACrB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClC,MAAM;KACT;GACF;;EAED,cAAc,GAAG;IACf,IAAI,eAAe,EAAE;MACnB,OAAO;KACR;IACD,eAAe,GAAG,IAAI,CAAC;IACvB,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,gBAAgB,EAAE;MAC7C,OAAO,EAAE,IAAI;MACb,QAAQ,EAAE,IAAI;KACf,CAAC,CAAC,CAAC;IACJ,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;GAC3I;;EAED,YAAY,CAAC,KAAK,EAAE;IAClB,IAAI,CAAC,eAAe,IAAI,eAAe,KAAK,IAAI,EAAE;MAChD,OAAO;KACR;IACD,GAAG,eAAe,CAAC,WAAW,EAAE;MAC9B,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;KAC/B,MAAM;MACL,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAC/B;IACD,eAAe,GAAG,IAAI,CAAC;GACxB;;EAED,kBAAkB,CAAC,KAAK,EAAE;IACxB,KAAK,MAAM,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE;MAChC,IAAI,OAAO,YAAY,oBAAoB,EAAE;QAC3C,OAAO;OACR;KACF;IACD,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;IACvE,IAAI,eAAe,EAAE;MACnB,eAAe,CAAC,UAAU,EAAE,CAAC;MAC7B,eAAe,GAAG,IAAI,CAAC;KACxB;GACF;;EAED,OAAO,CAAC,OAAO,EAAE;IACf,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;MACtC,OAAO;KACR;IACD,IAAI,OAAO,YAAY,oBAAoB,EAAE;MAC3C,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;KAC1B;IACD,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACpC,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE;MAC5B,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;KAC5B;IACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACtB,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,kBAAkB,EAAE;MAC/C,OAAO,EAAE,IAAI;MACb,QAAQ,EAAE,IAAI;KACf,CAAC,CAAC,CAAC;IACJ,OAAO,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,kBAAkB,EAAE;MAClD,OAAO,EAAE,IAAI;MACb,QAAQ,EAAE,IAAI;KACf,CAAC,CAAC,CAAC;GACL;;EAED,UAAU,CAAC,OAAO,EAAE;IAClB,IAAI,OAAO,EAAE;MACX,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;MACvC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC;MAC1B,OAAO,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,qBAAqB,EAAE;QACrD,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,IAAI;OACf,CAAC,CAAC,CAAC;KACL;IACD,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;;IAE/C,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;MACnB,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,qBAAqB,EAAE;QAClD,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,IAAI;OACf,CAAC,CAAC,CAAC;KACL;GACF;;EAED,eAAe,CAAC,KAAK,EAAE;IACrB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;GAChC;;EAED,IAAI,KAAK,GAAG;IACV,OAAO,IAAI,CAAC,MAAM,CAAC;GACpB;;EAED,IAAI,KAAK,CAAC,KAAK,EAAE;IACf,IAAI,KAAK,KAAK,IAAI,CAAC,MAAM,EAAE;MACzB,OAAO;KACR;IACD,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;IAEpB,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,iBAAiB,EAAE;MAC5C,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;KAC7B;IACD,IAAI,IAAI,CAAC,WAAW,EAAE;MACpB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;MACrC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,OAAO,EAAE;QAChD,OAAO,EAAE,IAAI;OACd,CAAC,CAAC,CAAC;MACJ,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,EAAE;QACjD,OAAO,EAAE,IAAI;OACd,CAAC,CAAC,CAAC;KACL;GACF;;EAED,IAAI,SAAS,GAAG;IACd,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;GAC5B;;EAED,IAAI,SAAS,CAAC,KAAK,EAAE;IACnB,IAAI,IAAI,CAAC,WAAW,EAAE;MACpB,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,KAAK,CAAC;KACnC;IACD,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC;GAC7B;;EAED,IAAI,MAAM,GAAG;IACX,OAAO,IAAI,CAAC,OAAO,CAAC;GACrB;;EAED,IAAI,MAAM,CAAC,KAAK,EAAE;IAChB,IAAI,IAAI,CAAC,OAAO,EAAE;MAChB,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;MACtE,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;KACxE;IACD,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACrB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;MACtC,OAAO;KACR;IACD,IAAI,IAAI,CAAC,WAAW,EAAE;MACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;KACjC;IACD,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;IACnE,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;GACrE;;EAED,IAAI,WAAW,GAAG;IAChB,OAAO,IAAI,CAAC,YAAY,CAAC;GAC1B;;EAED,IAAI,WAAW,CAAC,KAAK,EAAE;IACrB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;IAC1B,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;MACrB,OAAO;KACR;IACD,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE;MAC5B,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;KACtC;GACF;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,qBAAqB,EAAE,oBAAoB,CAAC,CAAC;;ACvN3D,MAAM,sBAAsB,SAAS,WAAW,CAAC;EAC9D,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;GACtC;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;;IAErB,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;IAmBjD,CAAC,CAAC;;IAEF,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG,EAAE,CAAC;;IAE7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IACvD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;;IAErD,MAAM,OAAO,GAAG,CAAC,KAAK,KAAK;MACzB,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;KAC9D,CAAC;IACF,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IACnD,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;GACrD;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,QAAQ,IAAI;MACV,KAAK,UAAU;QACb,IAAI,CAAC,IAAI,CAAC,GAAG,QAAQ,KAAK,IAAI,CAAC;QAC/B,MAAM;MACR,KAAK,OAAO;QACV,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;QAC1C,MAAM;MACR;QACE,IAAI,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;QACtB,MAAM;KACT;GACF;;EAED,IAAI,OAAO,CAAC,KAAK,EAAE;IACjB,IAAI,CAAC,QAAQ,GAAG,KAAK,YAAY,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1E,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE,CAAC;IAC5B,KAAK,IAAI,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;MAChC,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;MACvD,MAAM,iBAAiB,GAAG,OAAO,MAAM,KAAK,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;MAClG,aAAa,CAAC,KAAK,GAAG,iBAAiB,CAAC;MACxC,aAAa,CAAC,IAAI,GAAG,iBAAiB,CAAC;MACvC,aAAa,CAAC,QAAQ,GAAG,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC;MAC/C,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;MAChC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;KACjD;IACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;GAC1B;;EAED,IAAI,OAAO,GAAG;IACZ,OAAO,IAAI,CAAC,QAAQ,CAAC;GACtB;;EAED,IAAI,KAAK,GAAG;IACV,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GACjD;;EAED,IAAI,KAAK,CAAC,KAAK,EAAE;IACf,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACpB,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;GAC5B;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;GAC1B;;EAED,IAAI,IAAI,CAAC,KAAK,EAAE;IACd,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC;IAChC,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,KAAK,CAAC;GAC3B;;EAED,IAAI,QAAQ,CAAC,KAAK,EAAE;IAClB,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC;GAC/B;;EAED,IAAI,QAAQ,GAAG;IACb,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;GAC9B;;EAED,MAAM,GAAG;IACP,OAAO;MACL,IAAI,EAAE,IAAI,CAAC,IAAI;MACf,IAAI,EAAE,IAAI,CAAC,IAAI;MACf,KAAK,EAAE,IAAI,CAAC,KAAK;MACjB,OAAO,EAAE,IAAI,CAAC,OAAO;KACtB,CAAC;GACH;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,wBAAwB,EAAE,sBAAsB,CAAC,CAAC;;AChHhE,MAAM,sBAAsB,SAAS,WAAW,CAAC;EAC9D,WAAW,kBAAkB,GAAG;IAC9B,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;GACtC;;EAED,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;;IAER,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;;IAErB,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;IAoBjD,CAAC,CAAC;;IAEF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACnD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;;IAEvD,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,KAAK,KAAK;MAChC,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,UAAU,EAAE;QACpC,IAAI,CAAC,KAAK,EAAE,CAAC;OACd;MACD,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;KAC3D,CAAC;GACH;;EAED,wBAAwB,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACjD,IAAI,IAAI,IAAI,IAAI,EAAE;MAChB,IAAI,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;KACvB,MAAM;MACL,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KAC3C;GACF;;EAED,IAAI,IAAI,CAAC,KAAK,EAAE;IACd,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC;IAC/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;GACpB;;EAED,IAAI,IAAI,GAAG;IACT,OAAO,IAAI,CAAC,KAAK,CAAC;GACnB;;EAED,IAAI,QAAQ,GAAG;IACb,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;GAC9B;;EAED,IAAI,QAAQ,CAAC,KAAK,EAAE;IAClB,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,KAAK,CAAC;GAC/B;;EAED,IAAI,KAAK,CAAC,KAAK,EAAE;IACf,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACpB,IAAI,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,EAAE;MACrC,OAAO,EAAE,IAAI;KACd,CAAC,CAAC,CAAC;GACL;;EAED,IAAI,KAAK,GAAG;IACV,OAAO,IAAI,CAAC,MAAM,CAAC;GACpB;;EAED,MAAM,GAAG;IACP,OAAO;MACL,IAAI,EAAE,IAAI,CAAC,IAAI;MACf,IAAI,EAAE,IAAI,CAAC,IAAI;MACf,KAAK,EAAE,IAAI,CAAC,KAAK;KAClB,CAAC;GACH;CACF;;AAED,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,wBAAwB,EAAE,sBAAsB,CAAC,CAAC"}